<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bereken-tool • Aankoop & Recycling materialen</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 0; background: #1e1e1e; color: #FEFEF3; }
    header { text-align: center; padding: 2rem 1rem 1rem; }
    header h1 { margin: 0; font-size: 1.8rem; color: #FEFEF3;}
    header p { color: #FEFEF3;}
    .logo { max-width: 400px; margin-bottom: 1rem;}
    .wrap { max-width: 960px; margin: 0 auto; padding: 1rem; }
    .card { background: #2a2a2a; border: 1px solid #444; border-radius: 12px; padding: 1rem; margin-top: 1rem; }
    .card h2 { margin-top: 0; }
    .grid { display: grid; grid-template-columns: 1.2fr 0.8fr 1fr; gap: 10px; align-items: end; }
    .grid .head { font-size: .8rem; color: #FEFEF3; font-weight: 600; }
    .price { color: #FEFEF3; }
    label { font-weight: 600; }
    input[type="number"] { background: #333; color: #FEFEF3; border: 1px solid #555; width: 100%; padding: .4rem; font-size: 1rem; border-radius: 6px; }
    input[disabled] { background: #444; color: #888; }
    .price { font-size: .9rem; color: #444; }
    .sub { text-align: right; }
    button { cursor: pointer; border: none; border-radius: 8px; padding: .6rem 1rem; font-weight: 700; margin-top: .8rem; }
    .primary { background: #ffcc00; color: #111; }
    .ghost { background: #444; color: #FEFEF3; }
    .results { margin-top: 1rem; }
    .totals { display: flex; gap: 1rem; flex-wrap: wrap; }
    .pill { flex: 1; min-width: 120px; background: #333; border: 1px solid #555; border-radius: 8px; padding: .6rem; }
    .pill .label { font-size: .8rem; color: #bbb; }
    .pill .value { font-size: 1.2rem; font-weight: bold; color: #FEFEF3; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; font-size: .9rem; }
    td { color: #FEFEF3; }
    th, td { border: 1px solid #eee; padding: .4rem; }
    th { background: #333; color: #FEFEF3; text-align: left; }
    .right { text-align: right; }
    .switch { margin: .5rem 0; font-size: .9rem; }
  </style>
</head>
<body>
<header>
  <img src="logo.png" alt="Cruisin' Craftsmen" class="logo">
  <h1>Inkoop & Recycling — Berekentool</h1>
  <p>Vul aantallen in per item en klik op <b>Bereken</b>. Alle prijzen in EUR per stuk.</p>
</header>

<div class="wrap">

  <!-- Sectie 1: Aankoop materialen -->
  <section class="card" id="aankoop">
    <h2>Aankoop materialen</h2>
    <p class="switch">
      <input type="checkbox" id="approve-extra"> Manager-goedkeuring voor plastic, glas en koper
    </p>

    <div class="grid">
  <div class="head">Item</div>
  <div class="head">Aantal</div>
  <div class="head right">Prijs</div>

      <div><label for="aluminium">Aluminium</label><div class="price">€25 / stuk</div></div>
      <div><input id="aluminium" type="number" min="0" value="0"></div>
      <div class="sub">€<span id="sub-aluminium">0,00</span></div>

      <div><label for="carparts">Car parts</label><div class="price">€25 / stuk</div></div>
      <div><input id="carparts" type="number" min="0" value="0"></div>
      <div class="sub">€<span id="sub-carparts">0,00</span></div>
      
      <div><label for="ijzer">Ijzer</label><div class="price">€20 / stuk</div></div>
      <div><input id="ijzer" type="number" min="0" value="0"></div>
      <div class="sub">€<span id="sub-ijzer">0,00</span></div>

      <div><label for="metaalschroot">Metaalschroot</label><div class="price">€25 / stuk</div></div>
      <div><input id="metaalschroot" type="number" min="0" value="0"></div>
      <div class="sub">€<span id="sub-metaalschroot">0,00</span></div>

      <div><label for="rubber">Rubber</label><div class="price">€25 / stuk</div></div>
      <div><input id="rubber" type="number" min="0" value="0"></div>
      <div class="sub">€<span id="sub-rubber">0,00</span></div>

      <div><label for="staal">Staal</label><div class="price">€20 / stuk</div></div>
      <div><input id="staal" type="number" min="0" value="0"></div>
      <div class="sub">€<span id="sub-staal">0,00</span></div>

      <!-- €10 (restricted) -->

      <div><label for="glas">Glas</label><div class="price">€10 / stuk</div></div>
      <div><input id="glas" type="number" min="0" value="0" disabled></div>
      <div class="sub">€<span id="sub-glas">0,00</span></div>

      <div><label for="koper">Koper</label><div class="price">€10 / stuk</div></div>
      <div><input id="koper" type="number" min="0" value="0" disabled></div>
      <div class="sub">€<span id="sub-koper">0,00</span></div>

      <div><label for="plastic">Plastic</label><div class="price">€10 / stuk</div></div>
      <div><input id="plastic" type="number" min="0" value="0" disabled></div>
      <div class="sub">€<span id="sub-plastic">0,00</span></div>
    </div>

    <button class="primary" id="btn-aankoop">Bereken aankoop</button>
    <button class="ghost" id="btn-reset-aankoop">Reset aankoop</button>

    <div class="results" id="res-aankoop" hidden>
      <div class="totals">
        <div class="pill"><div class="label">Subtotaal aankoop</div><div class="value">€ <span id="sum-aankoop">0,00</span></div></div>
        <div class="pill"><div class="label">Aantal items</div><div class="value"><span id="cnt-aankoop">0</span></div></div>
      </div>
      <table>
        <thead><tr><th>Item</th><th class="right">Aantal</th><th class="right">Prijs/stuk</th><th class="right">Subtotaal</th></tr></thead>
        <tbody id="rows-aankoop"></tbody>
      </table>
    </div>
  </section>

  <!-- Sectie 2: Recycling -->
  <section class="card" id="recycling">
    <h2>Recycling materialen</h2>
    <div class="grid">
      <div class="head">Item</div><div class="head">Aantal</div><div class="head">Prijs</div>    

      <div><label for="telefoons">Gebroken telefoons</label><div class="price">€10 / stuk</div></div>
      <div><input id="telefoons" type="number" min="0" value="0"></div>
      <div class="sub">€<span id="sub-telefoons">0,00</span></div>

      <div><label for="radios">Gebroken radio's</label><div class="price">€10 / stuk</div></div>
      <div><input id="radios" type="number" min="0" value="0"></div>
      <div class="sub">€<span id="sub-radios">0,00</span></div>

      <div><label for="blikjes">Lege blikjes</label><div class="price">€10 / stuk</div></div>
      <div><input id="blikjes" type="number" min="0" value="0"></div>
      <div class="sub">€<span id="sub-blikjes">0,00</span></div>

      <div><label for="banden">Versleten fietsbanden</label><div class="price">€10 / stuk</div></div>
      <div><input id="banden" type="number" min="0" value="0"></div>
      <div class="sub">€<span id="sub-banden">0,00</span></div>
    </div>

    <button class="primary" id="btn-recycling">Bereken recycling</button>
    <button class="ghost" id="btn-reset-recycling">Reset recycling</button>

    <div class="results" id="res-recycling" hidden>
      <div class="totals">
        <div class="pill"><div class="label">Subtotaal recycling</div><div class="value">€ <span id="sum-recycling">0,00</span></div></div>
        <div class="pill"><div class="label">Aantal items</div><div class="value"><span id="cnt-recycling">0</span></div></div>
      </div>
      <table>
        <thead><tr><th>Item</th><th class="right">Aantal</th><th class="right">Prijs/stuk</th><th class="right">Subtotaal</th></tr></thead>
        <tbody id="rows-recycling"></tbody>
      </table>
    </div>
  </section>

  <!-- Algemeen totaal -->
  <section class="card">
    <h2>Totaal</h2>
    <div class="totals">
      <div class="pill"><div class="label">Bedrag totaal</div><div class="value">€ <span id="sum-total">0,00</span></div></div>
      <div class="pill"><div class="label">Aantal totaal</div><div class="value"><span id="cnt-total">0</span></div></div>
    </div>
  </section>
</div>

<script>
const euro = n => (n||0).toLocaleString('nl-NL',{minimumFractionDigits:2,maximumFractionDigits:2});
const parseEuro = (s) => {
  if (!s) return 0;
  // verwijder duizendtallen (.) en zet decimaal (,) naar punt
  return parseFloat(String(s).replace(/\./g, '').replace(',', '.')) || 0;
};

// prijzen
const PRICES = {
  aankoop: {
    ijzer:20, staal:20,
    aluminium:25, carparts:25, metaalschroot:25, rubber:25,
    plastic:10, glas:10, koper:10
  },
  recycling: { banden:10, blikjes:10, telefoons:10, radios:10 }
};

// goedkeuring toggle
const approveExtra = document.getElementById('approve-extra');
const restrictedIds = ["plastic","glas","koper"];
approveExtra.addEventListener('change',()=>{
  restrictedIds.forEach(id=>{
    const input=document.getElementById(id);
    input.disabled=!approveExtra.checked;
    if(!approveExtra.checked){input.value=0; document.getElementById(`sub-${id}`).textContent="0,00";}
  });
});

// berekenen sectie
function compute(section){
  const prices=PRICES[section]; let sum=0,count=0; let rows=[];
  for(const id in prices){
    const input=document.getElementById(id);
    if(!input) continue;
    // restricted check
    if(restrictedIds.includes(id) && !approveExtra.checked){
      document.getElementById(`sub-${id}`).textContent="0,00";
      continue;
    }
    const qty=parseInt(input.value)||0;
    const sub=qty*prices[id];
    sum+=sub; count+=qty;
    document.getElementById(`sub-${id}`).textContent=euro(sub);
    if(qty>0){ rows.push([id,qty,prices[id],sub]); }
  }
  return {sum,count,rows};
}

// render tabel
function renderRows(section,data){
  const tbody=document.getElementById(`rows-${section}`);
  tbody.innerHTML="";
  data.forEach(([id,qty,price,sub])=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${id}</td><td class="right">${qty}</td><td class="right">€${euro(price)}</td><td class="right">€${euro(sub)}</td>`;
    tbody.appendChild(tr);
  });
}

// Aankoop
document.getElementById('btn-aankoop').onclick=()=>{
  const {sum,count,rows}=compute('aankoop');
  document.getElementById('sum-aankoop').textContent=euro(sum);
  document.getElementById('cnt-aankoop').textContent=count;
  renderRows('aankoop',rows);
  document.getElementById('res-aankoop').hidden=false;
  updateTotal();
};
document.getElementById('btn-reset-aankoop').onclick=()=>{
  Object.keys(PRICES.aankoop).forEach(id=>{
    const input=document.getElementById(id); if(input){input.value=0; document.getElementById(`sub-${id}`).textContent="0,00";}
  });
  approveExtra.checked=false; restrictedIds.forEach(id=>document.getElementById(id).disabled=true);
  document.getElementById('res-aankoop').hidden=true; updateTotal();
};

// Recycling
document.getElementById('btn-recycling').onclick=()=>{
  const {sum,count,rows}=compute('recycling');
  document.getElementById('sum-recycling').textContent=euro(sum);
  document.getElementById('cnt-recycling').textContent=count;
  renderRows('recycling',rows);
  document.getElementById('res-recycling').hidden=false;
  updateTotal();
};
document.getElementById('btn-reset-recycling').onclick=()=>{
  Object.keys(PRICES.recycling).forEach(id=>{
    const input=document.getElementById(id); if(input){input.value=0; document.getElementById(`sub-${id}`).textContent="0,00";}
  });
  document.getElementById('res-recycling').hidden=true; updateTotal();
};

// totaal
function updateTotal(){
  const a = parseEuro(document.getElementById('sum-aankoop').textContent);
  const r = parseEuro(document.getElementById('sum-recycling').textContent);

  const ca = parseInt(document.getElementById('cnt-aankoop').textContent || "0", 10) || 0;
  const cr = parseInt(document.getElementById('cnt-recycling').textContent || "0", 10) || 0;

  document.getElementById('sum-total').textContent = euro(a + r);
  document.getElementById('cnt-total').textContent = (ca + cr).toString();
}

</script>
</body>
</html>
