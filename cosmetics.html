<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Cosmetics Tool ‚Ä¢ Cruisin Craftsmen</title>
  <style>
    body { margin:0; font-family:system-ui,sans-serif; background:#1e1e1e; color:#FEFEF3; }
    header { text-align:center; padding:2rem 1rem 1rem; }
    header img { max-width:280px; height:auto; }
    h1 { font-size:1.6rem; margin:.8rem 0 2rem; }
    .wrap { max-width:960px; margin:0 auto; padding:1rem; }
    .card { background:#2a2a2a; border:1px solid #444; border-radius:12px; padding:1rem; margin-top:1rem; }
    table { width:100%; border-collapse:collapse; margin-top:1rem; font-size:.9rem; }
    th, td { border:1px solid #555; padding:.5rem; vertical-align:top; }
    th { background:#333; color:#FEFEF3; text-align:left; }
    td { color:#FEFEF3; }
    .row { display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.8rem; }
    button { cursor:pointer; border:none; border-radius:8px; padding:.6rem 1rem; font-weight:700; }
    .primary { background:#A82B2D; color:#FEFEF3; }
    .ghost { background:#444; color:#FEFEF3; }
    .totals { display:flex; gap:1rem; flex-wrap:wrap; margin-top:1rem; }
    .pill { flex:1; min-width:200px; background:#333; border:1px solid #555; border-radius:8px; padding:.6rem; }
    .pill .label { font-size:.85rem; color:#bbb; }
    .pill .value { font-size:1.2rem; font-weight:700; }
    footer { text-align:center; margin:2rem 0; font-size:0.8rem; color:#ccc; border-top:1px solid #444; padding-top:1rem; }
    a.back-btn {
      display:inline-block; margin-top:1rem; padding:.6rem 1rem; border-radius:8px;
      text-decoration:none; background:#444; color:#FEFEF3; font-weight:700;
    }
    a.back-btn:hover { background:#555; }
    textarea { width:100%; min-height:160px; background:#333; color:#FEFEF3; border:1px solid #555; border-radius:6px; padding:.6rem; }

    /* checkbox + ‚Äúgedaan‚Äù stijl */
    .center { text-align:center; }
    tr.done td { text-decoration: line-through; opacity: .6; }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Cruisin Craftsmen">
    <h1>Cosmetics overzicht</h1>
    <p>Plak hieronder de cosmetica-tekst en zet om naar een duidelijk overzicht.</p>
  </header>

  <div class="wrap">
    <section class="card">
      <textarea id="input" placeholder="Plak hier de cosmetica tekst..."></textarea>

      <div class="row">
        <button id="convert" class="primary">Zet om naar tabel</button>
        <button id="reset" class="ghost">Reset</button>
      </div>

      <div class="totals">
        <div class="pill">
          <div class="label">Aantal items</div>
          <div class="value"><span id="count">0</span></div>
        </div>
        <div class="pill">
          <div class="label">Totaal (aantal √ó ‚Ç¨400)</div>
          <div class="value">‚Ç¨ <span id="total">0</span></div>
        </div>
        <div class="pill">
          <div class="label">Toegepast (√ó ‚Ç¨400)</div>
          <div class="value">
            <span id="applied">0</span> / <span id="applied-total">0</span>
            ‚Äî ‚Ç¨ <span id="applied-amount">0</span>
          </div>
        </div>
      </div>

      <div id="output"></div>
    </section>
  </div>

  <footer>
    <p>üîß Deze tool is gemaakt voor de <b>Eldorado RP</b> FiveM server.</p>
    <p>üíª Ontwikkeling & HTML door ChatGPT samen met de Cruisin Craftsmen crew üöó</p>
    <p><a href="index.html" class="back-btn">‚¨ÖÔ∏è Terug naar startpagina</a></p>
  </footer>

  <script>
  // Format euro zonder decimalen (nl-NL scheiding met punten)
  const euro = n => (n||0).toLocaleString('nl-NL',{minimumFractionDigits:0, maximumFractionDigits:0});

  /* ========== CATEGORIE√ãN ========== */
 const CATEGORIES = {
  /* ---------- Binnenkant Cosmetica ---------- */
  "Stoelen": "Stoel Cosmetics",
  "Stuurwielen": "Binnenkant cosmetica",
  "Trim A": "Binnenkant cosmetica",
  "Trim B": "Binnenkant cosmetica",

  /* ---------- Buitenkant Cosmetica ---------- */
  "Afwerking A": "Buitenkant cosmetica",
  "Afwerking B": "Buitenkant cosmetica",
  "Koffers": "Buitenkant cosmetica",
  "Luchtfilters": "Buitenkant cosmetica",
  "Motorblokken": "Buitenkant cosmetica",

  /* ---------- Carrosserie / Exterior ---------- */
  "Dak": "Voertuigdak",
  "Motorkappen": "Motorkap",
  "Roosters": "Bumper",
  "Spoilers": "Spoiler",
  "Voorbumpers": "Bumper",

  /* ---------- Nummerplaten ---------- */
  "Borden": "Aangepast kentekenplaat",
  "Kentekenhouder": "Aangepast kentekenplaat",
  "Vanity kenteken": "Aangepast kentekenplaat",

  /* ---------- Rollcage / Chassis ---------- */
  "Rolkooien": "Rollcage",

  /* ---------- Skirts / Spatborden ---------- */
  "Linker spatbord": "Skirts",
  "Rechter spatbord": "Skirts",
  "Skirts": "Skirts",

  /* ---------- Spuitbussen / Kleuren ---------- */
  "Dashboard": "Spuitbussen",
  "Interieur": "Spuitbussen",
  "Livery": "Bestickering",
  "Parelmoer": "Spuitbussen",
  "Primair": "Spuitbussen",
  "Secundair": "Spuitbussen",
  "Velg": "Spuitbussen",

  /* ---------- Uitlaat ---------- */
  "Uitlaten": "Uitlaat",

  /* ---------- Wielen ---------- */
  "Wheels": "Custom Velgen"
};


  // Split op komma's die NIET binnen [ ] staan
  function splitTopLevel(input) {
    const out = [];
    let buf = '', depth = 0;
    for (let i = 0; i < input.length; i++) {
      const ch = input[i];
      if (ch === '[') depth++;
      if (ch === ']') depth = Math.max(0, depth - 1);
      if (ch === ',' && depth === 0) { out.push(buf); buf = ''; }
      else { buf += ch; }
    }
    if (buf.trim()) out.push(buf);
    return out.map(s => s.trim()).filter(Boolean);
  }

  function parseEntry(entry) {
    const sep = entry.indexOf(' - ');
    if (sep === -1) return null;
    let key = entry.slice(0, sep).trim();
    let val = entry.slice(sep + 3).trim();
    if (val.startsWith('[') && val.endsWith(']')) val = val.slice(1, - 1).trim();
    key = key.replace(/\s+/g, ' ').trim();
    val = val.replace(/\s+/g, ' ').trim();
    return { key, val };
  }

  function escapeHtml(s) {
    return String(s)
      .replaceAll('&','&amp;')
      .replaceAll('<','&lt;')
      .replaceAll('>','&gt;')
      .replaceAll('"','&quot;')
      .replaceAll("'",'&#039;');
  }

 function renderTable(rows) {
  if (!rows.length) return '<p class="small">Geen geldige items gevonden.</p>';

  // sorteer: eerst categorie, dan onderdeel (key)
  const sorted = [...rows].sort((a, b) => {
    const ac = (a.cat || 'Nog te bepalen');
    const bc = (b.cat || 'Nog te bepalen');
    const byCat = ac.localeCompare(bc, 'nl', { sensitivity: 'base' });
    if (byCat !== 0) return byCat;
    return a.key.localeCompare(b.key, 'nl', { sensitivity: 'base' });
  });

  const body = sorted.map(({ key, val, cat }) => `
    <tr>
      <td class="center"><input type="checkbox" class="mark"></td>
      <td>${escapeHtml(key)}</td>
      <td>${escapeHtml(val || '‚Äî')}</td>
      <td>${escapeHtml(cat || 'Nog te bepalen')}</td>
    </tr>
  `).join('');

  return `
    <table id="cosm-table">
      <thead>
        <tr>
          <th class="center">‚úÖ</th>
          <th>Onderdeel</th>
          <th>Optie</th>
          <th>Categorie</th>
        </tr>
      </thead>
      <tbody>${body}</tbody>
    </table>`;
}

  function updateAppliedCounts() {
    const tbody = document.querySelector('#cosm-table tbody');
    if (!tbody) {
      document.getElementById('applied').textContent = '0';
      document.getElementById('applied-total').textContent = '0';
      document.getElementById('applied-amount').textContent = '0';
      return;
    }
    const total = tbody.querySelectorAll('tr').length;
    const checked = tbody.querySelectorAll('input.mark:checked').length;
    const amount = checked * 400;

    document.getElementById('applied').textContent = String(checked);
    document.getElementById('applied-total').textContent = String(total);
    document.getElementById('applied-amount').textContent = euro(amount);
  }

  // Convert
  document.getElementById('convert').onclick = () => {
    const input = document.getElementById('input').value.trim();
    if (!input) return;

    const entries = splitTopLevel(input)
      .map(parseEntry)
      .filter(Boolean);

    const rows = entries.map(({key, val}) => ({
      key,
      val,
      cat: CATEGORIES[key] || 'Nog te bepalen'
    }));

    // render tabel
document.getElementById('output').innerHTML = renderTable(rows);

// aantal & totaal (‚Ç¨400 per item)
const count = rows.length;
const total = count * 400;
document.getElementById('count').textContent = count.toString();
document.getElementById('total').textContent = euro(total);

// checkbox gedrag (strike-through bij aangevinkt) + teller
const tbody = document.querySelector('#cosm-table tbody');
tbody.addEventListener('change', (e) => {
  if (e.target && e.target.classList.contains('mark')) {
    const tr = e.target.closest('tr');
    if (tr) tr.classList.toggle('done', e.target.checked);
    updateAppliedCounts();
  }
});

// initialiseer teller (0 / N ‚Äî ‚Ç¨0)
updateAppliedCounts();

  // Reset
  document.getElementById('reset').onclick = () => {
    document.getElementById('input').value = '';
    document.getElementById('output').innerHTML = '';
    document.getElementById('count').textContent = '0';
    document.getElementById('total').textContent = '0';
    document.getElementById('applied').textContent = '0';
    document.getElementById('applied-total').textContent = '0';
    document.getElementById('applied-amount').textContent = '0';
  };
  </script>
</body>
</html>
